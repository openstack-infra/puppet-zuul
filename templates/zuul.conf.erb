[gearman]
server=<%= @gearman_server %>
check_job_registration=<%= @gearman_check_job_registration %>

[gearman_server]
start=<%= @internal_gearman %>
log_config=<%= @gearman_logconfig %>

[gerrit]
server=<%= @gerrit_server %>
user=<%= @gerrit_user %>
<% if scope['ssh_private_key'] != :undef -%>
sshkey=<%= @statedir + "/.ssh/id_rsa." + @gerrit_server %>
<% end -%>
<% if scope['gerrit_baseurl'] != :undef -%>
baseurl=<%= @gerrit_baseurl %>
<% end -%>
no_http=<%= @no_http %>

[zuul]
layout_config=<%= @layout %>
log_config=<%= @zuul_logconfig %>
state_dir=<%= @statedir %>
<% if scope['url_pattern'] != :undef -%>
url_pattern=<%= @url_pattern %>
<% end -%>
status_url=<%= @status_url %>
job_name_in_report=<%= @job_name_in_report %>

[merger]
git_dir=<%= @statedir + "/git" %>
zuul_url=<%= @zuul_url %>
log_config=<%= @merger_logconfig %>
<% if scope['git_email'] != :undef -%>
git_user_email=<%= @git_email %>
<% end -%>
<% if scope['git_name'] != :undef -%>
git_user_name=<%= @git_name %>
<% end -%>

<% if scope['swift_authurl'] != :undef -%>
[swift]
<% if @swift_account_temp_key != "" -%>
X-Account-Meta-Temp-Url-Key=<%= @swift_account_temp_key %>
<% end -%>
authurl=<%= @swift_authurl %>
user=<%= @swift_user %>
key=<%= @swift_key %>
tenant_name=<%= @swift_tenant_name %>
region_name=<%= @swift_region_name %>
default_container=<%= @swift_default_container %>
default_logserver_prefix=<%= @swift_default_logserver_prefix %>
<% if scope['swift_auth_version'] != :undef -%>
auth_version=<%= @swift_auth_version %>
<% end -%>
<% end -%>

<% if scope['smtp_host'] != :undef -%>
[smtp]
server=<%= @smtp_host %>
port=<%= @smtp_port %>
default_from=<%= @smtp_default_from %>
default_to=<%= @smtp_default_to %>
<% end -%>

<% if @jenkins_jobs != "" -%>
[launcher]
log_config=/etc/zuul/launcher-logging.conf
jenkins_jobs=<%= @jenkins_jobs %>
workspace_root=<%= @workspace_root %>
<% if @worker_private_key_file != "" -%>
private_key_file=<%= @worker_private_key_file %>
<% end -%>
<% if @worker_username != "" -%>
username=<%= @worker_username %>
<% end -%>
<% if @accept_nodes != "" -%>
accept_nodes=<%= @accept_nodes %>
<% end -%>
<% end -%>

<% @sites.each do |site| -%>
[site "<%= site['name'] %>"]
host=<%= site['host'] %>
<% if site['user'] != "" -%>
user=<%= site['user'] %>
<% end -%>
<% if site['pass'] != "" -%>
pass=<%= site['pass'] %>
<% end -%>
<% if site['root'] != "" -%>
root=<%= site['root'] %>
<% end -%>

<% end -%>

<% @nodes.each do |node| -%>
[node "<%= node['name'] %>"]
host=<%= node['host'] %>
<% if node['description'] != "" -%>
description=<%= node['description'] %>
<% end -%>
<% if node['labels'] != "" -%>
labels=<%= node['labels'] %>
<% end -%>

<% end -%>
